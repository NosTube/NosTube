<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NosTube Studio</title>
  <link rel="icon" href="../favicon.svg" type="image/svg+xml" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,300..700,0..1,-50..200" />
  <link rel="stylesheet" href="../css/main.css" />
</head>
<body class="nostube">
  <div class="studio-shell">
    <header class="studio-topbar">
      <div class="studio-topbar-left">
        <a class="studio-brand" href="../#home" aria-label="Back to NosTube">
          <span class="material-symbols-rounded">smart_display</span>
          <span class="studio-brand-text">Studio</span>
        </a>
      </div>
      <div class="studio-topbar-center">
        <div class="studio-search" role="search">
          <span class="material-symbols-rounded">search</span>
          <input id="studio-search" type="search" placeholder="Search across your channel" aria-label="Search across your channel" />
        </div>
      </div>
      <div class="studio-topbar-right">
        <button class="avatar" id="studio-auth" aria-label="Sign in">
          <span class="channel-initials" id="studio-auth-label">Sign in</span>
          <img class="avatar-img" id="studio-auth-image" alt="" loading="lazy" />
        </button>
      </div>
    </header>

    <div class="studio-body">
      <nav class="studio-sidebar" aria-label="Studio navigation">
        <a class="studio-nav-link" href="#dashboard" data-studio-nav="dashboard">
          <span class="material-symbols-rounded">dashboard</span>
          <span>Dashboard</span>
        </a>
        <a class="studio-nav-link" href="#content" data-studio-nav="content">
          <span class="material-symbols-rounded">video_library</span>
          <span>Content</span>
        </a>
        <a class="studio-nav-link" href="#upload" data-studio-nav="upload">
          <span class="material-symbols-rounded">upload</span>
          <span>Upload</span>
        </a>
        <a class="studio-nav-link" href="#customization" data-studio-nav="customization">
          <span class="material-symbols-rounded">brush</span>
          <span>Customization</span>
        </a>
        <a class="studio-nav-link" href="#settings" data-studio-nav="settings">
          <span class="material-symbols-rounded">settings</span>
          <span>Settings</span>
        </a>
        <div class="studio-nav-footer">
          <a class="studio-nav-link" href="../#home">
            <span class="material-symbols-rounded">arrow_back</span>
            <span>Back to NosTube</span>
          </a>
        </div>
      </nav>

      <main class="studio-main">
        <div class="feed-empty" id="studio-status">Sign in to publish.</div>

        <section class="studio-page" data-studio-page="dashboard">
          <div class="studio-page-head">
            <h1>Dashboard</h1>
            <div class="studio-page-sub">Quick overview for your channel.</div>
          </div>
          <div class="studio-card">
            <div class="feed-empty">Coming soon. Use Upload to publish your first video.</div>
            <div class="studio-actions">
              <a class="primary-btn" href="#upload">Upload</a>
            </div>
          </div>
        </section>

        <section class="studio-page" data-studio-page="content" hidden>
          <div class="studio-page-head">
            <h1>Channel content</h1>
            <div class="studio-tabs">
              <button class="studio-tab is-active" type="button">Videos</button>
              <button class="studio-tab" type="button" disabled>Shorts</button>
              <button class="studio-tab" type="button" disabled>Live</button>
            </div>
          </div>
          <div class="studio-card">
            <div class="feed-empty">No content available yet.</div>
            <div class="studio-actions">
              <a class="primary-btn" href="#upload">Upload videos</a>
            </div>
          </div>
        </section>

        <section class="studio-page" data-studio-page="upload" hidden>
          <div class="studio-page-head">
            <h1>Upload</h1>
            <div class="studio-page-sub">Publish a video event to your configured relays.</div>
          </div>
          <div class="studio-card">
            <div class="studio-subpanel">
              <div class="studio-subpanel-title">Addressable (optional)</div>
              <div class="studio-help">Use addressable uploads if you want to edit metadata later without changing the video link.</div>
              <label class="checkbox-row">
                <input type="checkbox" id="studio-editable" />
                <span>Editable (addressable)</span>
              </label>
              <label class="field">
                <span>Identifier (optional)</span>
                <input id="studio-identifier" placeholder="video-my-identifier (d tag)" />
              </label>
              <label class="field">
                <span>Edit existing (optional)</span>
                <div class="studio-row">
                  <input id="studio-edit-coord" placeholder="34235:&lt;pubkey&gt;:&lt;d&gt;" />
                  <button class="secondary-btn" type="button" id="studio-load">Load</button>
                </div>
              </label>
            </div>
            <label class="field">
              <span>Title</span>
              <input id="studio-title" placeholder="Video title" />
            </label>
            <label class="field">
              <span>Video URL</span>
              <input id="studio-url" placeholder="https://… or ipfs://…" />
            </label>
            <label class="field">
              <span>MIME (optional)</span>
              <input id="studio-mime" placeholder="video/mp4" />
            </label>
            <label class="field">
              <span>Thumbnail URL (optional)</span>
              <input id="studio-thumb" placeholder="https://…" />
            </label>
            <label class="field">
              <span>Summary (optional)</span>
              <textarea id="studio-summary" rows="3" placeholder="Describe your upload…"></textarea>
            </label>

            <label class="field">
              <span>Tags (optional)</span>
              <div class="studio-chips" id="studio-tags">
                <div class="studio-chiplist" id="studio-tags-list"></div>
                <input id="studio-tags-input" name="nostube-tags" placeholder="Add tags…" autocomplete="off" autocapitalize="none" spellcheck="false" inputmode="text" />
              </div>
            </label>

            <div class="studio-subpanel">
              <label class="checkbox-row">
                <input type="checkbox" id="studio-cw" />
                <span>Content warning</span>
              </label>
              <div class="studio-help">Adds a content warning tag so clients can filter or gate this video.</div>
              <div id="studio-cw-panel" hidden>
                <div class="studio-cw-grid" id="studio-cw-reasons">
                  <label class="studio-cw-item">
                    <input type="checkbox" value="nsfw" />
                    <span>NSFW</span>
                  </label>
                  <label class="studio-cw-item">
                    <input type="checkbox" value="nudity" />
                    <span>Nudity</span>
                  </label>
                  <label class="studio-cw-item">
                    <input type="checkbox" value="violence" />
                    <span>Violence</span>
                  </label>
                  <label class="studio-cw-item">
                    <input type="checkbox" value="strong language" />
                    <span>Strong language</span>
                  </label>
                  <label class="studio-cw-item">
                    <input type="checkbox" value="drugs" />
                    <span>Drugs</span>
                  </label>
                  <label class="studio-cw-item">
                    <input type="checkbox" value="flashing lights" />
                    <span>Flashing lights</span>
                  </label>
                </div>

                <label class="field">
                  <span>Custom warnings (optional)</span>
                  <div class="studio-chips" id="studio-cw-custom">
                    <div class="studio-chiplist" id="studio-cw-custom-list"></div>
                    <input id="studio-cw-custom-input" name="nostube-content-warning" placeholder="Add a warning…" autocomplete="off" autocapitalize="none" spellcheck="false" inputmode="text" />
                  </div>
                </label>
              </div>
            </div>

            <div class="studio-subpanel">
              <label class="checkbox-row">
                <input type="checkbox" id="studio-advanced" />
                <span>Advanced</span>
              </label>
              <div id="studio-advanced-panel" hidden>
                <label class="checkbox-row">
                  <input type="checkbox" id="studio-imeta" />
                  <span>Include imeta (NIP-92)</span>
                </label>
                <div class="studio-help">Enable this if you want other NIP-71 clients to read the video URL, thumbnail, and duration from a single structured tag.</div>
                <label class="field">
                  <span>Duration seconds (optional)</span>
                  <input id="studio-duration" placeholder="60" />
                </label>
              </div>
            </div>
            <label class="field">
              <span>Type</span>
              <select id="studio-kind">
                <option value="21">Video</option>
                <option value="22">Short</option>
              </select>
            </label>

            <details class="studio-inspector" id="studio-event-inspector">
              <summary>
                <span class="material-symbols-rounded studio-inspector-icon" aria-hidden="true">expand_more</span>
                <span>Event inspector</span>
              </summary>
              <div class="studio-help">Preview of the exact unsigned event that will be signed and published.</div>
              <pre class="studio-code" id="studio-event-preview"></pre>
            </details>

            <div class="studio-actions">
              <button class="primary-btn" id="studio-publish">Publish to relays</button>
            </div>
          </div>
        </section>

        <section class="studio-page" data-studio-page="customization" hidden>
          <div class="studio-page-head">
            <h1>Customization</h1>
            <div class="studio-page-sub">Edit your channel profile (kind 0).</div>
          </div>
          <div class="studio-card">
            <label class="field">
              <span>Channel name</span>
              <input id="studio-profile-name" placeholder="Your channel name" />
            </label>
            <label class="field">
              <span>About</span>
              <textarea id="studio-profile-about" rows="3" placeholder="Tell viewers about your channel"></textarea>
            </label>
            <label class="field">
              <span>Picture URL</span>
              <input id="studio-profile-picture" placeholder="https://…" />
            </label>
            <div class="studio-actions">
              <button class="primary-btn" id="studio-profile-save">Save</button>
            </div>
          </div>
        </section>

        <section class="studio-page" data-studio-page="settings" hidden>
          <div class="studio-page-head">
            <h1>Settings</h1>
            <div class="studio-page-sub">Studio settings (local only for now).</div>
          </div>
          <div class="studio-card">
            <div class="feed-empty">Coming soon.</div>
          </div>
        </section>
      </main>
    </div>

    <div class="modal" id="studio-auth-modal" hidden>
      <div class="modal-backdrop" data-modal-close></div>
      <div class="modal-card" role="dialog" aria-modal="true" aria-label="Sign in">
        <div class="modal-header">
          <div class="modal-title">Sign in</div>
          <button class="icon-btn" type="button" data-modal-close aria-label="Close">
            <span class="material-symbols-rounded">close</span>
          </button>
        </div>
        <div class="modal-body">
          <button class="primary-btn" id="studio-auth-ext">Sign in with extension</button>
          <div class="modal-divider">or</div>
          <form id="studio-auth-form" autocomplete="off" novalidate>
            <label class="field">
              <span>Nostr secret key (nsec)</span>
              <input type="password" id="studio-auth-nsec" placeholder="nsec1…" autocomplete="off" />
            </label>
            <label class="checkbox-row">
              <input type="checkbox" id="studio-auth-persist" />
              <span>Stay signed in on this device</span>
            </label>
            <button class="primary-btn" type="button" id="studio-auth-nsec-btn">Sign in with nsec</button>
          </form>
          <div class="modal-divider">or</div>
          <button class="secondary-btn" id="studio-auth-signup">Sign up (generate new keys)</button>
          <div class="key-output" id="studio-auth-generated" hidden>
            <div class="key-row">
              <div class="key-label">npub</div>
              <input id="studio-auth-generated-npub" readonly />
            </div>
            <div class="key-row">
              <div class="key-label">nsec</div>
              <input id="studio-auth-generated-nsec" readonly />
            </div>
            <div class="key-hint">Save your nsec somewhere safe. Anyone with it can publish as you.</div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="text-btn" id="studio-auth-signout" hidden>Sign out</button>
          <div class="modal-spacer"></div>
          <button class="text-btn" type="button" data-modal-close>Done</button>
        </div>
      </div>
    </div>

  </div>

  <div id="toast" class="toast" aria-live="polite" aria-atomic="true"></div>

  <script src="https://unpkg.com/nostr-tools@1.17.0/lib/nostr.bundle.js"></script>
  <script src="studio.js"></script>
</body>
</html>
